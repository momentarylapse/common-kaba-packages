use common

# always copy
shared Term subst(shared Term _t, string var, shared Term by)
	let t = _t.shallow_copy()
	for p in t.params
		p = subst(p, var, by)
	
	if t.type == TYPE_VARIABLE
		if t.name == var
			return by
	return t